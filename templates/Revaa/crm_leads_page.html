{% extends 'main.html' %}
{% load static %}

{% block title %}
Leads Page | Revaa Digital Solution
{% endblock %}

{% block content %}
{% include 'inc/messages.html' %}
<section class="content">
    {% if leadslistpage %}
    <h4>Leads Page</h4>
    {% endif %}
    {% if thismonthteads %}
    <h4>Monthly Leads</h4>
    {% endif %}
    {% if span_leads_count %}
    <h4>Last 30 Leads</h4>
    {% endif %}
    {% if Commercial_leads %}
    <h4>Commercial Leads</h4>
    {% endif %}
    {% if Future_prospective %}
    <h4>Future Prospective Leads</h4>
    {% endif %}
    {% if Prospective_Leads %}
    <h4>Prospective Leads</h4>
    {% endif %}
    {% if last30days %}
    <h4>Prospective Leads</h4>
    {% endif %}
<div>
    {% if leadslistpage %}
    <div>
        {% include 'alertform/new_Leads.html' %}
        <button type="button" class="btn btn-link btn-sm btn-rounded bg-light" data-toggle="modal"
            data-target="#new_Leads_add_container"> New Leads </button>

        {% include 'alertform/import_data.html' %}
        <button type="button" class="btn btn-link btn-sm btn-rounded bg-light" data-toggle="modal"
            data-target="#importdata">
            Import
            data </button>
        {% if All_Leads %}
        <a type="button" class="btn btn-link btn-sm btn-rounded bg-light" href="{% url 'export_leads' %}">Export
            data</a>
        {% endif %}
    </div>
    {% endif %}
</div>
<div class="mt-3">
    {% if All_Leads %}
        <form action="{% url 'ledas_filter' %}" method="post">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-2 mb-2">
                    <div class="form-outline me-2" data-mdb-input-init>
                        <input type="date" id="Fromdate" name="Fromdate" class="form-control" />
                        <label class="form-label" for="Fromdate">From Date</label>
                    </div>
                </div>
                <div class="col-md-2 mb-2">
                    <div class="form-outline" data-mdb-input-init>
                        <input type="date" id="todate" name="todate" class="form-control" />
                        <label class="form-label" for="todate">To Date</label>
                    </div>
                </div>
                <div class="col-md-2 mb-2">
                    <div class="form-outline" data-mdb-input-init>
                        <input type="date" id="todate" name="todate" class="form-control" />
                        <label class="form-label" for="todate">To Date</label>
                    </div>
                </div>
                <div class="col-md-2 mb-2">
                    <div class="form-outline" data-mdb-input-init>
                        <input type="date" id="todate" name="todate" class="form-control" />
                        <label class="form-label" for="todate">To Date</label>
                    </div>
                </div>
                <div class="col-md-2 mb-2">
                    <div class="form-outline" data-mdb-input-init>
                        <input type="date" id="todate" name="todate" class="form-control" />
                        <label class="form-label" for="todate">To Date</label>
                    </div>
                </div>
                <div class="col-md-2 mb-2">
                    <div class="form-outline" data-mdb-input-init>
                        <input type="date" id="todate" name="todate" class="form-control" />
                        <label class="form-label" for="todate">To Date</label>
                    </div>
                </div>
                <div class="col-md-2 mb-2">
                    <div class="form-outline" data-mdb-input-init>
                        <input type="date" id="todate" name="todate" class="form-control" />
                        <label class="form-label" for="todate">To Date</label>
                    </div>
                </div>
                <div class="col-md-2 mb-2">
                    <input type="submit" value="Filter" class="btn btn-primary mx-2">
                </div>
            </div>
            
        </form>
    {% endif %}
</div>

<hr>
{% if All_Leads %}
<table id="example" class="table table-striped" style="width:100%">
    <thead>
        <tr>
            <th class="p-2">S.No <i class='bx bx-sort text-primary'></i></th>
            <th class="p-2">Company Name <i class='bx bx-sort text-primary'></i></th>
            <th class="p-2">Client Name <i class='bx bx-sort text-primary'></i></th>
            <th class="p-2">Client Number <i class='bx bx-sort text-primary'></i></th>
            <th class="p-2">Call Back <i class='bx bx-sort text-primary'></i></th>
            <th class="p-2">Date Of Join</th>
            <th class="p-2">Product <i class='bx bx-sort text-primary'></i></th>
            <th class="p-2">Status <i class='bx bx-sort text-primary'></i></th>
        </tr>
    </thead>
    <tbody>
        {% for lead in All_Leads reversed%}
        <tr>
            <td class="p-2">{{forloop.counter}}</td>
            <td class="p-2"><a href="{% url 'editlead' pk=lead.pk %}">{{lead.company_name}}</a></td>
            <td class="p-2">{{lead.client_name}}</td>
            <td class="p-2">{{lead.client_number}}</td>
            <td class="p-2">{{lead.call_back}}</td>
            <td class="p-2">{{lead.created_date}}</td>
            <td class="p-2">
                {% for product in lead.products.all %}
                {{ product }}
                {% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td class="p-2">{{lead.status}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="row">
    <div class="col-12">
        <img src="{% static 'images/No_data_for_recent_actions.jpg' %}" width="30%" alt="">
    </div>
</div>
{% endif %}
</section>
{% endblock %}